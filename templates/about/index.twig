{# Beyond Foundation, Story #}

{% extends "_layout" %}

{% set entry = craft.entries().section('about').one() %}
{% set teasers = craft.entries().section('homeTeasers').all() %}

{% block content %}

    <header>
      {% include 'includes/header' %}
    </header>

    <nav id="nav-overlay"> {# triggered by hamburger #}
      {% include 'includes/nav' %}
    </nav>
      
    <main>
      <h2>{{ entry.pageHeading }}</h2>

      {% if entry.visibleText|length and entry.collapsedText|length %}
      <section class="single-col">
        <h3>Beyond Foundation</h3>

        <div class="accordion" style="margin-top: 0;">
          <div class="visible">
            {{ entry.visibleText }}
            <p class="accordion-trigger"><span>{{ 'Weitere Informationen'|t }}</span></p>
          </div>
          <div class="collapsed">
            {{ entry.collapsedText }}
            <p class="accordion-collapse"><span>{{ 'Weniger Informationen'|t }}</span></p>
          </div>
        </div>
      </section>
      {% endif %}

      <section class="single-col">
      {% if entry.video|length %}
        {% set video = entry.video %}
	<div class="video-container">
        {{  video.getEmbed() }}
	</div>
      {% elseif entry.heroImage|length %}
        <img class="full-width" src="{{ alias('@assetBasePath') }}/{{ entry.heroImage[0].getUrl('sixteen2nine') }}" alt="{{ entry.title }}, hero image">
      {% else %}
        <img class="full-width" src="{{ alias('@assetBasePath') }}/assets/_pic/placeholder_16-9.png" alt="{{ entry.title }}, hero image">
      {% endif %}
        <p class="video-caption full-width">{{ entry.shortDescription }}</p>
      </section>

      <h2>News</h2>

      {% for teaser in teasers %}

	{% if loop.index == 3 %}
		{% if entry.quote|length %}
			<blockquote>
				<p>{{ craft.app.language == 'de' ? '«' : '“' }}{{ entry.quote }}{{ craft.app.language == 'de' ? '»' : '”' }}</p>
			</blockquote>
		{% endif %}
	{% endif %}

	{% set associatedEntry = teaser.associatedEntry.one() %}

      <!-- start row -->
      <section class="alternating-grid-image-large">

        <!-- start image cell -->
        <div class="image-cell">
	{% if teaser.video|length %}
		{% set video = teaser.video %}
		<div class="video-container">
		{{ video.getEmbed() }}
		</div>
	{% else %} {# there’s no video #}
		{# ev. sollte das hier ein «HeroImage» sein, wie in anderen Einträgen, wo es entw. Video oder Bild gibt?  #}
		<a class="full-width;" href="{{ associatedEntry.getUrl() }}" style="margin: 0; padding: 0; grid-column: 1/-1; border: none; outline: 0">
		{% if teaser.teaserImage|length %}
			<img src="{{ alias('@assetBasePath') }}/{{ teaser.teaserImage[0].getUrl('sixteen2nine') }}" alt="{{ teaser.title }}">
		{% else %}
			<img src="{{ alias('@assetBasePath') }}/assets/_pic/placeholder_16-9.png" alt="{{ teaser.title }}, test image">
		{% endif %}
		</a>
	{% endif %}
        </div> <!-- end image cell -->

        <!-- start text column -->
          <h3 class="text-column">{{ associatedEntry.title }}</h3>
          <p class="text-column">{{ teaser.shortDescription }}</p>
	 <!-- end text column -->

      </section> <!-- end row -->
      {% endfor %}

    </main>
        
    <footer>
      {% include 'includes/footer' %}
    </footer>
    
    {% include 'includes/accordion-scripts' %}

    <script>
      console.log('I & I is at {{ slug }}' );
    </script>

{% endblock %}
